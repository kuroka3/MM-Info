:root{
  --text-primary:#f0f0f0;
}

.day-tabs{
  --day-tab-gap:.5rem;
  --day-tab-width:min(8rem,calc((100% - (var(--day-tab-gap) * 2)) / 3));
  display:flex;
  justify-content:center;
  gap:var(--day-tab-gap);
  margin:2rem auto;
  width:100%;
}
.day-tabs button{
  flex:0 0 var(--day-tab-width);
  width:var(--day-tab-width);
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  gap:.25rem;
  padding:.5rem .75rem;
  font-size:clamp(1rem,4vw,1.2rem);
  border-radius:9999px !important;
  border:1px solid var(--glass-border);
  background:var(--glass-bg);
  color:#f0f0f0;
  backdrop-filter:blur(10px);
  cursor:pointer;
  transition:background .2s, box-shadow .2s;
}
.day-tabs button .booth-day{
  width:clamp(1.4rem,4vw,1.8rem);
  height:clamp(1.4rem,4vw,1.8rem);
  font-size:clamp(.85rem,3vw,1rem);
}
.day-tabs button .date{
  line-height:1;
}
.day-tabs button:hover{
  box-shadow:0 0 8px rgba(240,240,240,.6);
}
.day-tabs button.active{
  background:rgba(255,255,255,.25);
  font-weight:700;
}

@media (min-width: 480px) {
  .day-tabs{
    --day-tab-gap:1rem;
    --day-tab-width:min(8rem,calc((100% - (var(--day-tab-gap) * 2)) / 3));
  }
  .day-tabs button{
    flex-direction:row;
    gap:.5rem;
    padding:.6rem 1.4rem;
  }
}

.cm-map-wrapper{
  position:relative;
  margin:0 auto;
  padding:1.5rem;
  background:rgba(255,255,255,0.1);
  backdrop-filter:blur(10px);
  border:1px solid var(--glass-border);
  border-radius:16px;
  overflow:visible;
}

.cm-grid{
  display:grid;
  width:100%;
  height:100%;
  grid-template-columns:repeat(17,minmax(0,1fr));
  grid-auto-rows:1fr;
  gap:2px;
  padding:2px;
}
.booth,
.booth-empty,
.booth-hidden{
  width:100%;
  height:100%;
}
.booth{
  position:relative;
  display:flex;
  align-items:center;
  justify-content:center;
  box-sizing:border-box;
  width:100%;
  height:100%;
  font-weight:700;
  font-size:clamp(.85rem,2vw,1rem);
  padding:.55rem .2rem;
  border-radius:8px;
  text-align:center;
  color: #f0f0f0;
  cursor:pointer;
  background:rgba(var(--row-color),0.25);
  border:1px solid rgba(var(--row-color),0.5);
  backdrop-filter:blur(6px);
  transition:background-color .2s, filter .2s, box-shadow .2s;
}
.booth:hover{
  box-shadow:0 0 6px rgba(var(--row-color),0.8);
  filter:brightness(1.1);
}
.booth.highlight{
  box-shadow:0 0 0 6px rgba(var(--row-color),1);
  animation:booth-highlight 5s ease-out;
}
.booth.touch-glow{
  box-shadow:0 0 0 6px rgba(var(--row-color),1),0 0 12px rgba(var(--row-color),0.8);
}
@keyframes booth-highlight{
  to{box-shadow:0 0 0 0 rgba(var(--row-color),0);}
}
.booth-empty{
  display:flex;
  align-items:center;
  justify-content:center;
  background:rgba(255,255,255,.04);
  border:1px dashed rgba(255,255,255,.18);
  border-radius:8px;
  padding:.3rem 0;
  font-size:1rem;
  color:rgba(255,255,255,.28);
}
.booth-hidden{
  background:transparent;
}

.flip-card{
  width:100%;
  height:100%;
  perspective:800px;
}
.flip-card.flipping .flip-inner{
  animation:flipY .6s forwards;
}
.flip-inner{
  width:100%;
  height:100%;
  position:relative;
  transform-style:preserve-3d;
}
.flip-front,
.flip-back{
  position:absolute;
  inset:0;
  backface-visibility:hidden;
}
.flip-back{transform:rotateY(180deg);}
@keyframes flipY{to{transform:rotateY(180deg);}}
.flip-card.flipping{pointer-events:none;}

.booth-tooltip{
  position:absolute;
  z-index:20000;
  left:50%;
  top:104%;
  bottom:auto;
  transform:translate(-50%, 8px);
  padding:.7rem;
  border-radius:12px;
  background:rgba(255,255,255,.15);
  color: #f0f0f0;
  border:1px solid var(--glass-border);
  backdrop-filter:blur(8px);
  opacity:0;
  visibility:hidden;
  transition:opacity .3s cubic-bezier(0.4,0,0.2,1),transform .3s cubic-bezier(0.4,0,0.2,1);
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:.25rem;
  min-width:auto;
  pointer-events:none;
}
.booth-tooltip.touch-glow{
  box-shadow:0 0 0 2px rgba(var(--row-color),0.9),0 0 12px rgba(var(--row-color),0.8);
}
.tooltip-img-wrapper{
  position:relative;
  width:120px;
  height:120px;
  border-radius:8px;
  overflow:hidden;
}
.tooltip-img{
  width:100%;
  height:100%;
  object-fit:cover;
}
.tooltip-title{
  font-size:.9rem;
  font-weight:600;
}
.walk-gap{
  height:10px;
  grid-column:1/-1;
}

button.booth {
  opacity: 1;
  z-index: 10000;
}
.booth .booth-label {
  display: inline-flex;
  transform: rotate(0deg);
  transform-origin: center;
}

@media (max-width:768px){
  .cm-map-wrapper {
    width: 100%;
    max-width: none;
  }
}

@media (max-width:480px){
  .cm-grid{
    width:100%;
    height:100%;
    grid-auto-rows:1fr;
  }
}

@media (max-width:480px) and (orientation:portrait){
  .cm-section.map-section{
    width:100%;
    overflow:hidden;
  }
  .cm-map-wrapper{
    width:100%;
    max-width:100%;
    box-sizing:border-box;
    margin:0;
  }
  .cm-grid .booth .booth-label{
    flex-direction:column;
    align-items:center;
  }
}
